# ktor-full-jwt

## üëè –û —á—ë–º —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç? 
–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –∫–∞–∫ –ø—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ JWT –∞—É—Ç–µ–Ω—Ç–µ—Ñ–∏–∫–∞—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é Ktor –∏ Exposed.

## üôä –ß—Ç–æ —É–º–µ–µ—Ç?
‚úîÔ∏è–ê—É—Ç–µ–Ω—Ç–µ—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ API –ø–æ –ª–æ–≥–∏–Ω—É –∏ –ø–∞—Ä–æ–ª—é.  
‚úîÔ∏è–í—ã–¥–∞—á–∞ refresh –∏ access —Ç–æ–∫–µ–Ω–æ–≤. –ò—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ.  
‚úñÔ∏è–°—Ç—Ä–∞–Ω–∏—Ü—ã –≤—Ö–æ–¥–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ, —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ—Ä –ø–æ —Ñ—Ä–æ–Ω—Ç—É.

## üèÅ –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞?
- Ktor  
- Exposed  
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)  
- BCrypt  

1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: 
`git clone https://github.com/Slenkis/ktor-full-jwt.git`

2. –°–æ–∑–¥–∞–µ–º 2 —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î: **refresh_tokens** –∏ **users**  
![–¢–∞–±–ª–∏—Ü—ã](https://imgur.com/2SRHjyr.jpg)

3. –í [application.conf](resources/application.conf) —É–∫–∞–∑—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ—Ç –ë–î

4. –ó–∞–ø—É—Å–∫–∞–º –ø—Ä–æ–µ–∫—Ç: 
`./gradlew run`

## üóø –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è?

1. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ `/api/login` json-–∑–∞–ø—Ä–æ—Å:
```json
{
    "email": "example@gmail.com",
    "password": "qwerty123"
}
```

2. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—Å—Ç—å –≤ –ë–î, —Ç–æ –≤ –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–∞–µ–º –ø–∞—Ä—É —Ç–æ–∫–µ–Ω–æ–≤:
```json
{
    "accessToken": "XXXXXX.YYYYYY.ZZZZZZ",
    "refreshToken": "d19e6fcd-ee18-4b38-acae-d1f7b9109118"
}
```

3. –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å—ã –∫ –Ω—É–∂–Ω—ã–º URL, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è **access-—Ç–æ–∫–µ–Ω** –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ *Authorization*:  
```Authorization: Bearer XXXXXX.YYYYYY.ZZZZZZ```

4. –ü—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ –∂–∏–∑–Ω–∏ **access-—Ç–æ–∫–µ–Ω–∞** –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—É—é –ø–∞—Ä—É *(–µ—ë –ø—Ä–∏–º–µ—Ä –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—É–Ω–∫—Ç–µ 2)*, –æ—Ç–ø—Ä–∞–≤–∏–≤ –∑–∞–ø—Ä–æ—Å –Ω–∞ `/api/refresh`, –≤ —Ç–µ–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ —É–∫–∞–∑–∞—Ç—å **refresh-—Ç–æ–∫–µ–Ω**:
```json
{
    "refreshToken": "d19e6fcd-ee18-4b38-acae-d1f7b9109118"
}
```

## ‚ö° –ï—Å—Ç—å –∑–∞–º–µ—á–∞–Ω–∏—è –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è?
–ú–æ–∂–Ω–æ –æ—Ñ–æ—Ä–º–∏—Ç—å [Issue](../../issues) –∏–ª–∏ —Å–≤—è–∑–∞—Ç—å—Å—è —Å–æ –º–Ω–æ–π –≤ [Telegram](https://t.me/slenkis)

## –õ–∏—Ü–µ–Ω–∑–∏—è
–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç –ª–∏—Ü–µ–Ω–∑–∏—é Apache 2.0, –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ [LICENSE](LICENSE)